{
  "project": {
    "name": "Onsen Planner",
    "folder": "Vecka",
    "appStoreName": "Onsen Planner",
    "platform": "iOS 18+",
    "technologies": ["SwiftUI", "SwiftData", "WidgetKit"],
    "designSystem": "ÊÉÖÂ†±„Éá„Ç∂„Ç§„É≥ (J≈çh≈ç Dezain) - Japanese Information Design",
    "bundleIdentifiers": {
      "main": "Johansson.Vecka",
      "widget": "Johansson.Vecka.VeckaWidget"
    }
  },
  
  "workflow": {
    "mandatoryPreRead": {
      "uiChanges": ".claude/design-system.md",
      "architectureChanges": ".claude/architecture.md", 
      "componentChanges": ".claude/COMPONENT_GLOSSARY.md",
      "symbolChanges": ".claude/japanese-symbol-language.md"
    },
    "buildCommands": {
      "debug": "./build.sh build",
      "release": "./build.sh build-release",
      "test": "./build.sh test",
      "clean": "./build.sh clean"
    }
  },

  "designSystem": {
    "philosophy": "Every visual element must serve a clear informational purpose. Nothing is decorative - everything communicates.",
    "inspiration": "Japanese OTC medicine packaging (Muhi, Rohto, Salonpas)",
    "principles": ["Compartmentalized layouts", "Thick black borders", "High contrast", "Purposeful color", "Squircle geometry"],
    
    "colors": {
      "semantic": {
        "yellow": { "hex": "#FFE566", "meaning": "NOW / Present", "usage": "Today, current highlight, attention" },
        "cyan": { "hex": "#A5F3FC", "meaning": "Scheduled Time", "usage": "Events, appointments, calendar items" },
        "pink": { "hex": "#FECDD3", "meaning": "Special Day", "usage": "Holidays, birthdays, celebrations" },
        "orange": { "hex": "#FED7AA", "meaning": "Movement", "usage": "Trips, travel, locations" },
        "green": { "hex": "#BBF7D0", "meaning": "Money", "usage": "Expenses, financial, transactions" },
        "purple": { "hex": "#E9D5FF", "meaning": "People", "usage": "Contacts, relationships" },
        "red": { "hex": "#E53935", "meaning": "Alert", "usage": "Warnings, Sundays, errors" },
        "cream": { "hex": "#FEF3C7", "meaning": "Personal", "usage": "Notes, user annotations" },
        "black": { "hex": "#000000", "meaning": "Definition", "usage": "Borders, text, authority" },
        "white": { "hex": "#FFFFFF", "meaning": "Content", "usage": "Container backgrounds" }
      },
      "backgrounds": {
        "trueBlack": { "hex": "#000000", "name": "Black (default)", "description": "Maximum AMOLED savings" },
        "darkNavy": { "hex": "#1A1A2E", "name": "Navy", "description": "Warm dark (legacy)" },
        "nearBlack": { "hex": "#0A0A0F", "name": "Soft", "description": "Slightly warmer" }
      }
    },

    "typography": {
      "font": "SF Pro Rounded",
      "rule": "ALWAYS include .design(.rounded), NEVER use weights below .medium",
      "scale": {
        "displayLarge": { "size": 48, "weight": "heavy", "usage": "Hero numbers" },
        "displayMedium": { "size": 32, "weight": "bold", "usage": "Section titles" },
        "headline": { "size": 18, "weight": "bold", "usage": "Card titles" },
        "body": { "size": 16, "weight": "medium", "usage": "Content" },
        "bodySmall": { "size": 14, "weight": "medium", "usage": "Secondary" },
        "label": { "size": 12, "weight": "bold", "usage": "Pills, badges (UPPERCASE)" },
        "labelSmall": { "size": 10, "weight": "bold", "usage": "Timestamps" }
      }
    },

    "spacing": {
      "xs": 4,
      "sm": 8,
      "md": 12,
      "lg": 16,
      "maxTopPadding": 8
    },

    "borders": {
      "rule": "Every element MUST have a border. No exceptions.",
      "color": "#000000",
      "widths": {
        "cells": 1,
        "rows": 1.5,
        "buttons": 2,
        "selected": 2.5,
        "containers": 3
      }
    },

    "corners": {
      "rule": "All corners MUST use continuous curvature",
      "implementation": ".clipShape(RoundedRectangle(cornerRadius: X, style: .continuous))",
      "forbidden": ".cornerRadius(X)",
      "radii": {
        "dayCells": 8,
        "buttons": 8,
        "pills": 6,
        "cards": 12,
        "containers": 16
      }
    },

    "forbiddenPatterns": [
      ".background(.ultraThinMaterial)",
      ".background(.thinMaterial)",
      "LinearGradient(...)",
      "RadialGradient(...)",
      "Color.blue",
      ".background(Color.white) without stroke",
      ".padding(.top, 40) or >8pt",
      ".cornerRadius(12)",
      "Text(\"\\(year)\")",
      ".spring(response: 0.5, dampingFraction: 0.5)"
    ],

    "requiredPatterns": {
      "colors": "ALWAYS use JohoColors, never raw Color",
      "corners": "ALWAYS use squircle corners with style: .continuous",
      "borders": "ALWAYS add borders",
      "fonts": "ALWAYS use .design(.rounded)",
      "textFormatting": "Use String(year), not \"\\(year)\""
    },

    "touchTargets": {
      "minimum": "44√ó44pt for all interactive elements",
      "spacing": "Minimum 12pt between buttons"
    }
  },

  "architecture": {
    "pattern": "Manager + Model + View",
    "flow": "User Action ‚Üí View ‚Üí Manager.shared (cache check) ‚Üí SwiftData Query / Engine Calculation ‚Üí Cache Update ‚Üí View Update",
    
    "targets": {
      "Vecka": { "description": "Main app", "iosVersion": "iOS 18.0+" },
      "VeckaWidgetExtension": { "description": "Widget (S/M/L)", "iosVersion": "iOS 18.0+" },
      "VeckaTests": { "description": "Unit tests" },
      "VeckaUITests": { "description": "UI automation" }
    },

    "fileStructure": {
      "Core/": "Week calculation logic",
      "Models/": "SwiftData models, structs",
      "Views/": "SwiftUI views",
      "Services/": "External integrations",
      "Intents/": "Siri Shortcuts",
      "JohoDesignSystem.swift": "Design system components",
      "Localization.swift": "i18n strings"
    },

    "swiftDataModels": [
      "DailyNote", "HolidayRule", "CalendarRule", "CountdownEvent", 
      "ExpenseCategory", "ExpenseTemplate", "ExpenseItem", 
      "TravelTrip", "MileageEntry", "ExchangeRate", "SavedLocation"
    ],

    "calendarConfig": {
      "identifier": ".gregorian",
      "firstWeekday": 2,
      "minimumDaysInFirstWeek": 4,
      "locale": "sv_SE"
    },

    "holidayRegions": {
      "SE": { "country": "Sweden", "bankHolidays": 12, "observances": 8 },
      "US": { "country": "United States", "bankHolidays": 11, "observances": 5 },
      "VN": { "country": "Vietnam", "bankHolidays": 6, "observances": 1 },
      "maxSelectable": 2
    },

    "managers": {
      "HolidayManager": "Holiday calculation and caching",
      "CalendarManager": "Calendar rule management", 
      "CountdownManager": "Countdown event management"
    },

    "widgetImplementation": {
      "sizes": {
        "small": "Week number with semantic color",
        "medium": "Week number + date range + countdown",
        "large": "Full 7-day calendar with events"
      },
      "deepLinks": {
        "today": "vecka://today",
        "week": "vecka://week/{weekNumber}/{year}",
        "calendar": "vecka://calendar"
      }
    }
  },

  "components": {
    "goldenStandard": "Star Page (SpecialDaysListView.swift) - All pages should follow this pattern",
    
    "navigation": {
      "pages": [
        { "internal": "Calendar Page", "display": "Calendar", "icon": "calendar", "file": "ModernCalendarView.swift" },
        { "internal": "Star Page", "display": "Special Days", "icon": "star.fill", "file": "SpecialDaysListView.swift" },
        { "internal": "Tools Page", "display": "Tools / Workspace", "icon": "wrench.and.screwdriver", "file": "DashboardView.swift" },
        { "internal": "Contacts Page", "display": "Contacts", "icon": "person.2", "file": "ContactListView.swift" },
        { "internal": "Settings Page", "display": "Settings", "icon": "gearshape", "file": "SettingsView.swift" },
        { "internal": "Notes Page", "display": "Notes", "icon": "doc.text", "file": "NotesListView.swift" },
        { "internal": "Events Page", "display": "Countdowns", "icon": "timer", "file": "CountdownListView.swift" },
        { "internal": "Trips Page", "display": "Trips", "icon": "airplane", "file": "TripListView.swift" },
        { "internal": "Expenses Page", "display": "Expenses", "icon": "dollarsign.circle", "file": "ExpenseListView.swift" }
      ]
    },

    "reusableComponents": {
      "layout": {
        "Squircle": { "line": 253, "usage": "Continuous corner shape" },
        "JohoContainer": { "line": 268, "usage": "Bordered container with optional zone color" },
        "JohoCard": { "line": 569, "usage": "White card with black border" },
        "JohoSectionBox": { "line": 456, "usage": "Colored section with title pill" },
        "JohoFormSection": { "line": 495, "usage": "White form with black header" },
        "JohoFormField": { "line": 546, "usage": "Form field with label" },
        "JohoCalendarContainer": { "line": 1309, "usage": "Calendar grid wrapper" }
      },
      "headers": {
        "JohoPageHeader": { "line": 787, "usage": "Simple page header (title + badge)" },
        "JohoEditorHeader": { "line": 823, "usage": "Editor sheet header (back + icon + save)" }
      },
      "display": {
        "JohoPill": { "line": 313, "usage": "Label badges (black/white/colored)" },
        "JohoIndicatorCircle": { "line": 409, "usage": "Type indicator dots (‚óè‚óã)" },
        "JohoDayCell": { "line": 589, "usage": "Calendar day cell" },
        "JohoWeekBadge": { "line": 643, "usage": "Large week number display" },
        "JohoListRow": { "line": 697, "usage": "Standard list row with icon" },
        "JohoStatBox": { "line": 758, "usage": "Statistics display box" },
        "JohoIconBadge": { "line": 928, "usage": "Small icon with badge" },
        "JohoTodayBanner": { "line": 1158, "usage": "Today highlight banner" },
        "JohoEmptyState": { "line": 1092, "usage": "Empty content placeholder" }
      },
      "interactive": {
        "JohoActionButton": { "line": 1470, "usage": "Action button with icon" },
        "JohoToggle": { "line": 1057, "usage": "ÊÉÖÂ†±„Éá„Ç∂„Ç§„É≥ toggle switch" },
        "JohoToggleRow": { "line": 949, "usage": "Toggle with label" },
        "JohoMetricRow": { "line": 902, "usage": "Metric display row" },
        "JohoDivider": { "line": 990, "usage": "Black divider line" }
      },
      "calendar": {
        "JohoMonthSelector": { "line": 1237, "usage": "Month navigation arrows" },
        "JohoWeekdayHeader": { "line": 1327, "usage": "Day of week header row" },
        "JohoWeekNumberCell": { "line": 1358, "usage": "Week number in grid" },
        "JohoCalendarDayCell": { "line": 1389, "usage": "Full calendar day cell" }
      }
    },

    "unificationPriorities": {
      "phase1": [
        "Extract JohoYearPicker from Star Page",
        "Create JohoBentoPageHeader (header + controls + stats)",
        "Ensure all editors use JohoEditorHeader"
      ],
      "phase2": [
        "Extract JohoBentoRow pattern",
        "Extract JohoStatsRow pattern", 
        "Standardize swipe actions across all lists"
      ],
      "phase3": [
        "Move JohoIconPicker to JohoDesignSystem",
        "Document CountryPill location",
        "Audit all pages against Star Page"
      ]
    }
  },

  "symbols": {
    "philosophy": "Japan has developed the world's most sophisticated system of visual communication symbols. Every symbol has meaning, history, and purpose.",
    
    "iconRules": {
      "style": "Flat, outlined, monochrome",
      "type": "SF Symbols, Unicode symbols",
      "weight": "Regular to Bold",
      "fill": "Outline OR solid fill",
      "forbidden": ["3D", "gradients", "shadows", "emoji", "colored icons", "platform-dependent rendering"]
    },

    "maruBatsu": {
      "core": {
        "‚óé": { "name": "Nij≈´-maru", "meaning": "Excellent/Best", "usage": "Top choice, primary" },
        "‚óã": { "name": "Maru", "meaning": "Good/Yes/Correct", "usage": "Positive, available" },
        "‚ñ≥": { "name": "Sankaku", "meaning": "Caution/Partial/Maybe", "usage": "Warning, partial" },
        "‚ñ°": { "name": "Shikaku", "meaning": "Note/Reference/Neutral", "usage": "Information" },
        "√ó": { "name": "Batsu", "meaning": "No/Wrong/Failed", "usage": "Negative, cancel" },
        "„Éº": { "name": "B≈ç", "meaning": "Not applicable/None", "usage": "N/A state" }
      },
      "filledVsOutlined": {
        "‚óè": "Strong yes vs Standard yes",
        "‚ñ≤": "Strong warning vs Mild caution", 
        "‚ñ†": "Active/Selected vs Inactive",
        "‚óÜ": "Important vs Notable"
      },
      "sfSymbolMapping": {
        "‚óã": "circle",
        "‚óè": "circle.fill",
        "‚óé": "circle.circle",
        "‚ñ≥": "triangle",
        "‚ñ≤": "triangle.fill",
        "‚ñ°": "square",
        "‚ñ†": "square.fill",
        "‚óá": "diamond",
        "‚óÜ": "diamond.fill",
        "√ó": "xmark"
      }
    },

    "weekGridMapping": {
      "holiday": { "symbol": "‚óè", "color": "red", "meaning": "Filled = has content" },
      "observance": { "symbol": "‚óã", "color": "orange", "meaning": "Outlined = secondary" },
      "event": { "symbol": "‚óÜ", "color": "purple", "meaning": "Diamond = special" },
      "birthday": { "symbol": "‚óè", "color": "pink", "meaning": "Filled = celebration" },
      "note": { "symbol": "‚ñ°", "color": "yellow", "meaning": "Square = information" },
      "trip": { "symbol": "‚óè", "color": "blue", "meaning": "Filled = scheduled" },
      "expense": { "symbol": "‚óè", "color": "green", "meaning": "Filled = transaction" }
    },

    "priorityCategories": {
      "P0": ["Maru-Batsu Core", "Status"],
      "P1": ["Numbers", "Reference", "Arrows"],
      "P2": ["Calendar"],
      "P3": ["Weather"]
    },

    "calendarSymbols": {
      "Á•ù": { "meaning": "National Holiday", "japanese": "Á•ùÊó• (shukujitsu)" },
      "‰ºë": { "meaning": "Rest Day / Closed", "japanese": "‰ºë„Åø (yasumi)" },
      "ÊåØ": { "meaning": "Substitute Holiday", "japanese": "ÊåØÊõø‰ºëÊó• (furikae ky≈´jitsu)" },
      "‚óè": { "meaning": "Special day marker" },
      "‚óé": { "meaning": "Very important date" },
      "‚òÖ": { "meaning": "Featured/Highlighted" }
    },

    "referenceMarks": {
      "‚Äª": { "name": "Kome-jirushi", "meaning": "Note/Attention", "importance": "THE most important reference mark" },
      "‚òÜ": { "name": "Hoshi", "meaning": "Star reference" },
      "‚òÖ": { "name": "Kuro-boshi", "meaning": "Important star" },
      "‚Ä†": { "name": "Dagger", "meaning": "Footnote" },
      "‚Ä°": { "name": "Double dagger", "meaning": "Second footnote" },
      "¬ß": { "name": "Section", "meaning": "Section reference" },
      "¬∂": { "name": "Paragraph", "meaning": "Paragraph reference" }
    }
  },

  "implementationRules": {
    "designCompliance": {
      "role": "ÊÉÖÂ†±„Éá„Ç∂„Ç§„É≥ Guardian",
      "violations": "Design violations are bugs",
      "mandatoryChecks": [
        "Every container has a black border",
        "Colors match semantic meaning", 
        "No glass/blur effects",
        "All corners use style: .continuous",
        "Typography uses .design(.rounded)",
        "Max 8pt top padding",
        "Icons use correct weight (16pt .medium for lists)"
      ]
    },

    "swipeActions": {
      "right": { "action": "Edit", "color": "Cyan", "icon": "pencil" },
      "left": { "action": "Delete", "color": "Red", "icon": "trash" },
      "systemExemption": "System holidays (üîí) have no swipe actions"
    },

    "countryPills": {
      "Sweden": { "background": "#004B87", "text": "#FECC00", "code": "SWE" },
      "USA": { "background": "#3C3B6E", "text": "#FFFFFF", "code": "USA" },
      "Vietnam": { "background": "#DA251D", "text": "#FFCD00", "code": "VN" },
      "border": "black borders"
    },

    "codePatterns": {
      "correct": [
        ".foregroundStyle(JohoColors.black)",
        ".background(JohoColors.white)",
        ".clipShape(RoundedRectangle(cornerRadius: 12, style: .continuous))",
        ".overlay(RoundedRectangle(...).stroke(JohoColors.black, lineWidth: 1.5))",
        ".font(.system(size: 16, weight: .medium, design: .rounded))"
      ],
      "incorrect": [
        ".background(.ultraThinMaterial)",
        "LinearGradient(...)",
        "Color.blue",
        ".cornerRadius(12)",
        ".padding(.top, 40)",
        "Text(\"\\(year)\")"
      ]
    },

    "auditCommands": [
      "grep -rn \"ultraThinMaterial\\|thinMaterial\" --include=\"*.swift\"",
      "grep -rn \"\\.cornerRadius(\" --include=\"*.swift\"",
      "grep -rn \"Color\\.blue\\|Color\\.red\" --include=\"*.swift\"",
      "grep -rn \"LinearGradient\\|RadialGradient\" --include=\"*.swift\"",
      "grep -rn \"\\.padding(.top,\" --include=\"*.swift\""
    ]
  },

  "fileReferences": {
    "primaryFiles": {
      "designSystem": "Vecka/JohoDesignSystem.swift",
      "goldenStandard": "Vecka/Views/SpecialDaysListView.swift",
      "navigation": "Vecka/Views/AppSidebar.swift",
      "ipadSidebar": "Vecka/Views/IconStripSidebar.swift",
      "colorsFonts": "JohoDesignSystem.swift:48-226",
      "allJohoComponents": "JohoDesignSystem.swift:268-1500"
    },
    "documentation": {
      "designSystem": ".claude/design-system.md",
      "architecture": ".claude/architecture.md", 
      "components": ".claude/COMPONENT_GLOSSARY.md",
      "symbols": ".claude/japanese-symbol-language.md",
      "working": ".claude/WORKING_WITH_CLAUDE.md"
    }
  }
}