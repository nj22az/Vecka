{
  "documentAnalysis": {
    "metadata": {
      "title": "Displaying the right widget background",
      "subtitle": "Group your widget's background views and mark them as removable to ensure your widget appears correctly for each context and platform.",
      "author": "Apple Inc.",
      "publisher": "Apple Developer Documentation",
      "source": "Apple Developer Website",
      "sourceUrl": "https://developer.apple.com/documentation/widgetkit/displaying-the-right-widget-background",
      "documentType": "Article",
      "framework": "WidgetKit",
      "breadcrumb": ["WidgetKit", "Widgets and watch complications", "Displaying the right widget background"],
      "breadcrumbVerbatim": "WidgetKit / Widgets and watch complications / Displaying the right widget background",
      "pageCount": 1,
      "primaryLanguage": "English",
      "programmingLanguage": "Swift",
      "copyright": "Copyright Â© 2025 Apple Inc. All rights reserved.",
      "legalLinks": [
        {"text": "Terms of Use", "url": "https://www.apple.com/legal/internet-services/terms/site.html"},
        {"text": "Privacy Policy", "url": "https://www.apple.com/privacy/privacy-policy/"},
        {"text": "Agreements and Guidelines", "url": "https://developer.apple.com/support/terms/"}
      ],
      "feedbackText": "To submit feedback on documentation, visit Feedback Assistant.",
      "themeOptions": ["Light", "Dark", "Auto"],
      "languageSelector": {
        "label": "Documentation Language:",
        "selectedValue": "Swift"
      },
      "keywords": [
        "WidgetKit",
        "widget background",
        "containerBackground",
        "accessory widgets",
        "StandBy",
        "vibrant appearance",
        "background removal",
        "SwiftUI",
        "Apple Watch",
        "Lock Screen",
        "Smart Stack",
        "CarPlay"
      ],
      "summary": "This Apple Developer documentation article explains how to properly configure widget backgrounds for different contexts and platforms. It covers marking backgrounds as removable using containerBackground modifier, opting out of background removal for content-critical widgets, and setting consistent backgrounds for accessory widgets."
    },
    "layout": {
      "type": "three-column",
      "backgroundColor": "#1c1c1e",
      "textColor": "#ffffff",
      "header": {
        "present": true,
        "content": {
          "logo": {
            "type": "Apple Developer Logo",
            "icon": "Apple symbol ()",
            "text": "Developer"
          },
          "navigation": {
            "mainTabs": ["News", "Discover", "Design", "Develop", "Distribute", "Support", "Account"],
            "searchIcon": true
          }
        }
      },
      "leftSidebar": {
        "present": true,
        "width": "approximately 280px",
        "backgroundColor": "#2c2c2e",
        "title": "Documentation",
        "filterPlaceholder": "Filter /",
        "sections": [
          {
            "sectionTitle": "All Technologies",
            "items": [
              {
                "title": "WidgetKit",
                "expandable": true,
                "expanded": true,
                "children": [
                  {
                    "title": "Displaying the right widget back...",
                    "fullTitle": "Displaying the right widget background",
                    "icon": "document icon",
                    "selected": true,
                    "highlighted": true
                  },
                  {
                    "title": "Optimizing your widget for accent...",
                    "fullTitle": "Optimizing your widget for accented rendering mode and Liquid Glass",
                    "icon": "document icon"
                  },
                  {
                    "title": "Adding StandBy and CarPlay supp...",
                    "fullTitle": "Adding StandBy and CarPlay support to your widget",
                    "icon": "document icon"
                  },
                  {
                    "title": "WidgetRenderingMode",
                    "icon": "S (struct icon)",
                    "prefix": "S",
                    "type": "struct"
                  },
                  {
                    "title": "WidgetAccentedRenderingMode",
                    "icon": "S (struct icon)",
                    "prefix": "S",
                    "type": "struct"
                  },
                  {
                    "title": "AccessoryWidgetBackground",
                    "icon": "S (struct icon)",
                    "prefix": "S",
                    "type": "struct"
                  },
                  {
                    "title": "WidgetLocation",
                    "icon": "S (struct icon)",
                    "prefix": "S",
                    "type": "struct"
                  }
                ]
              },
              {
                "sectionTitle": "Timeline updates",
                "items": [
                  {
                    "title": "Keeping a widget up to date",
                    "icon": "document icon"
                  },
                  {
                    "title": "TimelineProvider",
                    "icon": "Pr (protocol icon)",
                    "prefix": "Pr",
                    "type": "protocol"
                  },
                  {
                    "title": "AppIntentTimelineProvider",
                    "icon": "Pr (protocol icon)",
                    "prefix": "Pr",
                    "type": "protocol"
                  },
                  {
                    "title": "IntentTimelineProvider",
                    "icon": "Pr (protocol icon)",
                    "prefix": "Pr",
                    "type": "protocol"
                  },
                  {
                    "title": "TimelineProviderContext",
                    "icon": "S (struct icon)",
                    "prefix": "S",
                    "type": "struct"
                  },
                  {
                    "title": "TimelineEntry",
                    "icon": "Pr (protocol icon)",
                    "prefix": "Pr",
                    "type": "protocol"
                  },
                  {
                    "title": "Timeline",
                    "icon": "S (struct icon)",
                    "prefix": "S",
                    "type": "struct"
                  },
                  {
                    "title": "WidgetCenter",
                    "icon": "C (class icon)",
                    "prefix": "C",
                    "type": "class"
                  }
                ]
              },
              {
                "sectionTitle": "Push notification updates",
                "items": [
                  {
                    "title": "Updating widgets with WidgetKit p...",
                    "fullTitle": "Updating widgets with WidgetKit push notifications",
                    "icon": "document icon"
                  }
                ]
              }
            ]
          }
        ]
      },
      "mainContent": {
        "width": "approximately 60%",
        "backgroundColor": "#1c1c1e"
      },
      "footer": {
        "present": true,
        "backgroundColor": "#000000",
        "columns": [
          {
            "title": "Platforms",
            "items": ["iOS", "iPadOS", "macOS", "tvOS", "visionOS", "watchOS"]
          },
          {
            "title": "Tools",
            "items": ["Swift", "SwiftUI", "Swift Playground", "TestFlight", "Xcode", "Xcode Cloud", "SF Symbols"]
          },
          {
            "title": "Topics & Technologies",
            "items": ["Accessibility", "Accessories", "App Extension", "App Store", "Audio & Video", "Augmented Reality", "Design", "Distribution", "Education", "Fonts", "Games", "Health & Fitness", "In-App Purchase", "Localization", "Maps & Location", "Machine Learning & AI", "Open Source", "Security", "Safari & Web"]
          },
          {
            "title": "Resources",
            "items": ["Documentation", "Tutorials", "Downloads", "Forums", "Videos"]
          },
          {
            "title": "Support",
            "items": ["Support Articles", "Contact Us", "Bug Reporting", "System Status"]
          },
          {
            "title": "Account",
            "items": ["Apple Developer", "App Store Connect", "Certificates, IDs, & Profiles", "Feedback Assistant"]
          },
          {
            "title": "Programs",
            "items": ["Apple Developer Program", "Apple Developer Enterprise Program", "App Store Small Business Program", "MFi Program", "News Partner Program", "Video Partner Program", "Security Bounty Program", "Security Research Device Program"]
          },
          {
            "title": "Events",
            "items": ["Meet with Apple", "Apple Developer Centers", "App Store Awards", "Apple Design Awards", "Apple Developer Academies", "WWDC"]
          }
        ]
      }
    },
    "pages": [
      {
        "pageNumber": 1,
        "dimensions": {
          "width": 1440,
          "height": 3200,
          "unit": "pixels (estimated from screenshot)"
        },
        "orientation": "portrait",
        "backgroundColor": "#1c1c1e",
        "layout": {
          "type": "three-column",
          "leftSidebarWidth": "280px",
          "mainContentWidth": "800px",
          "rightSidebarWidth": "280px",
          "margins": {
            "top": 56,
            "right": 20,
            "bottom": 100,
            "left": 20
          },
          "headerPresent": true,
          "footerPresent": true
        },
        "elements": [
          {
            "elementId": "page1-header-navigation",
            "elementType": "navigation",
            "boundingBox": {
              "x": 0,
              "y": 0,
              "width": 1440,
              "height": 56
            },
            "zIndex": 100,
            "content": {
              "type": "navigation-bar",
              "items": [
                {
                  "label": " Developer",
                  "type": "logo",
                  "position": "left"
                },
                {
                  "label": "News",
                  "type": "link"
                },
                {
                  "label": "Discover",
                  "type": "link"
                },
                {
                  "label": "Design",
                  "type": "link"
                },
                {
                  "label": "Develop",
                  "type": "link"
                },
                {
                  "label": "Distribute",
                  "type": "link"
                },
                {
                  "label": "Support",
                  "type": "link"
                },
                {
                  "label": "Account",
                  "type": "link"
                },
                {
                  "label": "Search icon (magnifying glass)",
                  "type": "icon-button",
                  "position": "right"
                }
              ],
              "style": {
                "backgroundColor": "dark translucent black",
                "textColor": "#86868b",
                "hoverTextColor": "#ffffff"
              }
            }
          },
          {
            "elementId": "page1-sidebar-left",
            "elementType": "navigation",
            "boundingBox": {
              "x": 0,
              "y": 56,
              "width": 280,
              "height": 800
            },
            "zIndex": 10,
            "content": {
              "type": "sidebar-navigation",
              "title": "Documentation",
              "titleIcon": "document.text.fill",
              "filterField": {
                "placeholder": "Filter /",
                "icon": "magnifying-glass"
              },
              "fullContentTree": {
                "allTechnologies": {
                  "widgetKit": {
                    "expanded": true,
                    "items": [
                      {"title": "Displaying the right widget back...", "selected": true, "icon": "doc"},
                      {"title": "Optimizing your widget for accent...", "icon": "doc"},
                      {"title": "Adding StandBy and CarPlay supp...", "icon": "doc"},
                      {"title": "WidgetRenderingMode", "prefix": "S", "icon": "struct"},
                      {"title": "WidgetAccentedRenderingMode", "prefix": "S", "icon": "struct"},
                      {"title": "AccessoryWidgetBackground", "prefix": "S", "icon": "struct"},
                      {"title": "WidgetLocation", "prefix": "S", "icon": "struct"}
                    ]
                  },
                  "timelineUpdates": {
                    "title": "Timeline updates",
                    "items": [
                      {"title": "Keeping a widget up to date", "icon": "doc"},
                      {"title": "TimelineProvider", "prefix": "Pr", "icon": "protocol"},
                      {"title": "AppIntentTimelineProvider", "prefix": "Pr", "icon": "protocol"},
                      {"title": "IntentTimelineProvider", "prefix": "Pr", "icon": "protocol"},
                      {"title": "TimelineProviderContext", "prefix": "S", "icon": "struct"},
                      {"title": "TimelineEntry", "prefix": "Pr", "icon": "protocol"},
                      {"title": "Timeline", "prefix": "S", "icon": "struct"},
                      {"title": "WidgetCenter", "prefix": "C", "icon": "class"}
                    ]
                  },
                  "pushNotificationUpdates": {
                    "title": "Push notification updates",
                    "items": [
                      {"title": "Updating widgets with WidgetKit p...", "icon": "doc"}
                    ]
                  }
                }
              }
            }
          },
          {
            "elementId": "page1-breadcrumb",
            "elementType": "navigation",
            "boundingBox": {
              "x": 300,
              "y": 80,
              "width": 800,
              "height": 24
            },
            "zIndex": 10,
            "content": {
              "type": "breadcrumb",
              "verbatimText": "WidgetKit / Widgets and watch complications / Displaying the right widget background",
              "items": [
                {"text": "WidgetKit", "link": true, "linkColor": "#2997ff"},
                {"text": "/", "separator": true},
                {"text": "Widgets and watch complications", "link": true, "linkColor": "#2997ff"},
                {"text": "/", "separator": true},
                {"text": "Displaying the right widget background", "link": false, "current": true}
              ]
            }
          },
          {
            "elementId": "page1-article-type-badge",
            "elementType": "annotation",
            "boundingBox": {
              "x": 300,
              "y": 110,
              "width": 60,
              "height": 20
            },
            "zIndex": 10,
            "content": {
              "text": "Article",
              "style": {
                "backgroundColor": "transparent",
                "textColor": "#86868b",
                "fontSize": "small",
                "fontWeight": "regular"
              }
            }
          },
          {
            "elementId": "page1-main-title",
            "elementType": "heading",
            "level": 1,
            "boundingBox": {
              "x": 300,
              "y": 130,
              "width": 800,
              "height": 60
            },
            "zIndex": 10,
            "content": {
              "text": "Displaying the right widget background",
              "verbatimText": "Displaying the right widget background",
              "style": {
                "fontFamily": "SF Pro Display",
                "fontSize": "36px",
                "fontWeight": "bold",
                "textColor": "#ffffff"
              }
            }
          },
          {
            "elementId": "page1-subtitle",
            "elementType": "paragraph",
            "boundingBox": {
              "x": 300,
              "y": 200,
              "width": 800,
              "height": 50
            },
            "zIndex": 10,
            "content": {
              "text": "Group your widget's background views and mark them as removable to ensure your widget appears correctly for each context and platform.",
              "verbatimText": "Group your widget's background views and mark them as removable to ensure your widget appears correctly for each context and platform.",
              "style": {
                "fontFamily": "SF Pro Text",
                "fontSize": "18px",
                "textColor": "#86868b"
              }
            },
            "relationships": [
              {
                "relatedElementId": "page1-main-title",
                "relationshipType": "caption-for"
              }
            ]
          },
          {
            "elementId": "page1-section-overview",
            "elementType": "heading",
            "level": 2,
            "boundingBox": {
              "x": 300,
              "y": 280,
              "width": 800,
              "height": 30
            },
            "zIndex": 10,
            "content": {
              "text": "Overview",
              "verbatimText": "Overview",
              "style": {
                "fontFamily": "SF Pro Display",
                "fontSize": "24px",
                "fontWeight": "bold",
                "textColor": "#ffffff"
              }
            }
          },
          {
            "elementId": "page1-overview-intro",
            "elementType": "paragraph",
            "boundingBox": {
              "x": 300,
              "y": 320,
              "width": 800,
              "height": 60
            },
            "zIndex": 10,
            "content": {
              "text": "Widgets appear differently based on their context, including their background view, for example:",
              "verbatimText": "Widgets appear differently based on their context, including their background view, for example:",
              "style": {
                "fontFamily": "SF Pro Text",
                "fontSize": "16px",
                "textColor": "#ffffff"
              }
            }
          },
          {
            "elementId": "page1-context-list",
            "elementType": "list",
            "listType": "bullet",
            "boundingBox": {
              "x": 300,
              "y": 390,
              "width": 800,
              "height": 80
            },
            "zIndex": 10,
            "content": {
              "items": [
                {
                  "verbatimText": "In the vibrant appearance, the system removes the background of your widget or renders it with semi-translucent appearance.",
                  "text": "In the vibrant appearance, the system removes the background of your widget or renders it with semi-translucent appearance.",
                  "links": [
                    {
                      "text": "vibrant appearance",
                      "type": "internal-link",
                      "url": "https://developer.apple.com/documentation/widgetkit/vibrant-appearance",
                      "color": "#2997ff"
                    }
                  ]
                },
                {
                  "verbatimText": "In StandBy on iPhone, the system removes the background of your widget.",
                  "text": "In StandBy on iPhone, the system removes the background of your widget."
                }
              ],
              "bulletStyle": "disc",
              "bulletColor": "#ffffff"
            }
          },
          {
            "elementId": "page1-marking-instruction",
            "elementType": "paragraph",
            "boundingBox": {
              "x": 300,
              "y": 480,
              "width": 800,
              "height": 40
            },
            "zIndex": 10,
            "content": {
              "text": "To make sure your widget appears correctly, mark your background views as removable for every widget size.",
              "verbatimText": "To make sure your widget appears correctly, mark your background views as removable for every widget size."
            }
          },
          {
            "elementId": "page1-important-callout-1",
            "elementType": "callout",
            "calloutType": "Important",
            "boundingBox": {
              "x": 300,
              "y": 540,
              "width": 800,
              "height": 80
            },
            "zIndex": 10,
            "content": {
              "title": "Important",
              "titleVerbatim": "Important",
              "body": "If a widget doesn't support removable background views or doesn't explicitly mark a background as nonremovable, the system displays a warning message that overlays the widget during development with Xcode.",
              "bodyVerbatim": "If a widget doesn't support removable background views or doesn't explicitly mark a background as nonremovable, the system displays a warning message that overlays the widget during development with Xcode.",
              "styling": {
                "backgroundColor": "#3a3a3c",
                "borderLeft": "4px solid #ffcc00",
                "borderRadius": "0 8px 8px 0",
                "padding": "16px",
                "titleColor": "#ffcc00",
                "titleFontWeight": "semibold",
                "bodyColor": "#ffffff"
              }
            }
          },
          {
            "elementId": "page1-steps-intro",
            "elementType": "paragraph",
            "boundingBox": {
              "x": 300,
              "y": 640,
              "width": 800,
              "height": 30
            },
            "zIndex": 10,
            "content": {
              "text": "To mark your background views as removable:",
              "verbatimText": "To mark your background views as removable:"
            }
          },
          {
            "elementId": "page1-steps-list",
            "elementType": "list",
            "listType": "numbered",
            "boundingBox": {
              "x": 300,
              "y": 680,
              "width": 800,
              "height": 120
            },
            "zIndex": 10,
            "content": {
              "items": [
                {
                  "number": "1",
                  "numberDisplay": "F.",
                  "verbatimText": "Add the containerBackground(_:for:) modifier to your background views to define the background appearance of your widget and tell WidgetKit that it can remove the view where applicable.",
                  "text": "Add the containerBackground(_:for:) modifier to your background views to define the background appearance of your widget and tell WidgetKit that it can remove the view where applicable.",
                  "inlineCode": [
                    {
                      "text": "containerBackground(_:for:)",
                      "type": "method",
                      "link": "https://developer.apple.com/documentation/swiftui/view/containerbackground(_:for:)",
                      "linkColor": "#2997ff"
                    }
                  ]
                },
                {
                  "number": "2",
                  "numberDisplay": "I.",
                  "verbatimText": "Move code that declares any background color or views inside the containerBackground(for:) view modifier and pass widget to it. This makes sure WidgetKit automatically removes the background as needed.",
                  "text": "Move code that declares any background color or views inside the containerBackground(for:) view modifier and pass widget to it. This makes sure WidgetKit automatically removes the background as needed.",
                  "inlineCode": [
                    {
                      "text": "containerBackground(for:)",
                      "type": "method"
                    },
                    {
                      "text": "widget",
                      "type": "parameter"
                    }
                  ]
                }
              ]
            }
          },
          {
            "elementId": "page1-sample-code-intro",
            "elementType": "paragraph",
            "boundingBox": {
              "x": 300,
              "y": 820,
              "width": 800,
              "height": 60
            },
            "zIndex": 10,
            "content": {
              "verbatimText": "The following code snippet from the Emoji Rangers: Supporting Live Activities, interactivity, and animations sample code project defines a gameBackground color for the widget's container background to make sure WidgetKit renders it with or without the background color as applicable.",
              "text": "The following code snippet from the Emoji Rangers: Supporting Live Activities, interactivity, and animations sample code project defines a gameBackground color for the widget's container background to make sure WidgetKit renders it with or without the background color as applicable.",
              "links": [
                {
                  "text": "Emoji Rangers: Supporting Live Activities, interactivity, and animations",
                  "type": "external-link",
                  "url": "https://developer.apple.com/documentation/widgetkit/emoji-rangers-supporting-live-activities-interactivity-and-animations",
                  "color": "#2997ff"
                }
              ]
            }
          },
          {
            "elementId": "page1-code-example-1",
            "elementType": "code",
            "language": "Swift",
            "boundingBox": {
              "x": 300,
              "y": 900,
              "width": 800,
              "height": 400
            },
            "zIndex": 10,
            "content": {
              "verbatimCode": "var body: some View {\n    switch family {\n    // Logic for additional widget sizes.\n    case .accessoryRectangular:\n        HStack(alignment: .center, spacing: 0) {\n            VStack(alignment: .leading) {\n                Text(entry.hero.name)\n                    .font(.headline)\n                    .widgetAccentable()\n                Text(\"Level \\(entry.hero.level)\")\n                Text(entry.hero.fullHealthDate, style: .timer)\n            }.frame(maxWidth: .infinity, alignment: .leading)\n            Avatar(hero: entry.hero, includeBackground: false)\n        }\n        .containerBackground(for: .widget) {\n            Color.gameBackground\n        }\n    // Logic for additional widget sizes.\n    }\n}",
              "codeLines": [
                {"lineNumber": 1, "code": "var body: some View {"},
                {"lineNumber": 2, "code": "    switch family {"},
                {"lineNumber": 3, "code": "    // Logic for additional widget sizes."},
                {"lineNumber": 4, "code": "    case .accessoryRectangular:"},
                {"lineNumber": 5, "code": "        HStack(alignment: .center, spacing: 0) {"},
                {"lineNumber": 6, "code": "            VStack(alignment: .leading) {"},
                {"lineNumber": 7, "code": "                Text(entry.hero.name)"},
                {"lineNumber": 8, "code": "                    .font(.headline)"},
                {"lineNumber": 9, "code": "                    .widgetAccentable()"},
                {"lineNumber": 10, "code": "                Text(\"Level \\(entry.hero.level)\")"},
                {"lineNumber": 11, "code": "                Text(entry.hero.fullHealthDate, style: .timer)"},
                {"lineNumber": 12, "code": "            }.frame(maxWidth: .infinity, alignment: .leading)"},
                {"lineNumber": 13, "code": "            Avatar(hero: entry.hero, includeBackground: false)"},
                {"lineNumber": 14, "code": "        }"},
                {"lineNumber": 15, "code": "        .containerBackground(for: .widget) {"},
                {"lineNumber": 16, "code": "            Color.gameBackground"},
                {"lineNumber": 17, "code": "        }"},
                {"lineNumber": 18, "code": "    // Logic for additional widget sizes."},
                {"lineNumber": 19, "code": "    }"},
                {"lineNumber": 20, "code": "}"}
              ],
              "syntaxHighlighting": {
                "keywords": {
                  "color": "#ff7ab2",
                  "tokens": ["var", "some", "switch", "case", "for"]
                },
                "types": {
                  "color": "#dabaff",
                  "tokens": ["View", "HStack", "VStack", "Text", "Avatar", "Color"]
                },
                "properties": {
                  "color": "#41a1c0",
                  "tokens": ["body", "family", "accessoryRectangular", "alignment", "center", "spacing", "leading", "entry", "hero", "name", "headline", "level", "fullHealthDate", "timer", "infinity", "widget", "gameBackground", "maxWidth", "includeBackground"]
                },
                "strings": {
                  "color": "#fc6a5d",
                  "tokens": ["\"Level \\(entry.hero.level)\""]
                },
                "comments": {
                  "color": "#7f8c8d",
                  "tokens": ["// Logic for additional widget sizes."]
                },
                "numbers": {
                  "color": "#d0bf69",
                  "tokens": ["0"]
                },
                "booleans": {
                  "color": "#ff7ab2",
                  "tokens": ["false"]
                },
                "punctuation": {
                  "color": "#ffffff",
                  "tokens": ["{", "}", "(", ")", ".", ",", ":"]
                }
              },
              "style": {
                "backgroundColor": "#2c2c2e",
                "fontFamily": "SF Mono, Menlo, monospace",
                "fontSize": "14px",
                "padding": "16px",
                "borderRadius": "8px",
                "lineHeight": "1.5"
              }
            },
            "relationships": [
              {
                "relatedElementId": "page1-sample-code-intro",
                "relationshipType": "continues-from"
              }
            ]
          },
          {
            "elementId": "page1-marking-explanation",
            "elementType": "paragraph",
            "boundingBox": {
              "x": 300,
              "y": 1320,
              "width": 800,
              "height": 100
            },
            "zIndex": 10,
            "content": {
              "verbatimText": "Marking background views as removable by defining a background container so you can use the same layout and views for your widget across contexts. For example, if you support the rectangular accessory widget size as shown in the code snippet above, WidgetKit renders it with a rich, full-color background in the Smart Stack on Apple Watch and without a background as a watch complication or on the Lock Screen of iPhone and iPad.",
              "text": "Marking background views as removable by defining a background container so you can use the same layout and views for your widget across contexts. For example, if you support the rectangular accessory widget size as shown in the code snippet above, WidgetKit renders it with a rich, full-color background in the Smart Stack on Apple Watch and without a background as a watch complication or on the Lock Screen of iPhone and iPad."
            }
          },
          {
            "elementId": "page1-apple-watch-note",
            "elementType": "paragraph",
            "boundingBox": {
              "x": 300,
              "y": 1440,
              "width": 800,
              "height": 80
            },
            "zIndex": 10,
            "content": {
              "verbatimText": "On Apple Watch, rectangular widgets in the Smart Stack use a default dark material background. By adding a container background, the widget renders with a background that visually ties it to your app and makes it more recognizable to people.",
              "text": "On Apple Watch, rectangular widgets in the Smart Stack use a default dark material background. By adding a container background, the widget renders with a background that visually ties it to your app and makes it more recognizable to people."
            }
          },
          {
            "elementId": "page1-environment-variable",
            "elementType": "paragraph",
            "boundingBox": {
              "x": 300,
              "y": 1540,
              "width": 800,
              "height": 40
            },
            "zIndex": 10,
            "content": {
              "verbatimText": "To detect whether a widget appears with or without a background, use the showsWidgetContainerBackground environment variable.",
              "text": "To detect whether a widget appears with or without a background, use the showsWidgetContainerBackground environment variable.",
              "inlineCode": [
                {
                  "text": "showsWidgetContainerBackground",
                  "type": "environment-variable",
                  "link": "https://developer.apple.com/documentation/swiftui/environmentvalues/showswidgetcontainerbackground",
                  "linkColor": "#2997ff"
                }
              ]
            }
          },
          {
            "elementId": "page1-section-opt-out",
            "elementType": "heading",
            "level": 2,
            "boundingBox": {
              "x": 300,
              "y": 1600,
              "width": 800,
              "height": 30
            },
            "zIndex": 10,
            "content": {
              "text": "Explicitly opt out of background removal",
              "verbatimText": "Explicitly opt out of background removal",
              "style": {
                "fontFamily": "SF Pro Display",
                "fontSize": "24px",
                "fontWeight": "bold",
                "textColor": "#ffffff"
              }
            }
          },
          {
            "elementId": "page1-opt-out-explanation",
            "elementType": "paragraph",
            "boundingBox": {
              "x": 300,
              "y": 1640,
              "width": 800,
              "height": 100
            },
            "zIndex": 10,
            "content": {
              "verbatimText": "Some widgets don't have distinct foreground content, and background removal can negatively impact their functionality. For example, a widget might display a photo or map that takes up the entirety of the widget's bounds. Removing the photo or map removes the functionality of the widget. If this case applies to your widget, set the containerBackgroundRemovable(_:) modifier to false for your widget configuration.",
              "text": "Some widgets don't have distinct foreground content, and background removal can negatively impact their functionality. For example, a widget might display a photo or map that takes up the entirety of the widget's bounds. Removing the photo or map removes the functionality of the widget. If this case applies to your widget, set the containerBackgroundRemovable(_:) modifier to false for your widget configuration.",
              "inlineCode": [
                {
                  "text": "containerBackgroundRemovable(_:)",
                  "type": "method",
                  "link": "https://developer.apple.com/documentation/widgetkit/widgetconfiguration/containerbackgroundremovable(_:)",
                  "linkColor": "#2997ff"
                },
                {
                  "text": "false",
                  "type": "boolean-value"
                }
              ]
            }
          },
          {
            "elementId": "page1-important-callout-2",
            "elementType": "callout",
            "calloutType": "Important",
            "boundingBox": {
              "x": 300,
              "y": 1760,
              "width": 800,
              "height": 80
            },
            "zIndex": 10,
            "content": {
              "title": "Important",
              "titleVerbatim": "Important",
              "body": "Marking a background as nonremovable excludes your widget from the widget gallery in contexts that require a removable background; for example, on the iPad Lock Screen and in StandBy.",
              "bodyVerbatim": "Marking a background as nonremovable excludes your widget from the widget gallery in contexts that require a removable background; for example, on the iPad Lock Screen and in StandBy.",
              "styling": {
                "backgroundColor": "#3a3a3c",
                "borderLeft": "4px solid #ffcc00",
                "borderRadius": "0 8px 8px 0",
                "padding": "16px",
                "titleColor": "#ffcc00",
                "titleFontWeight": "semibold",
                "bodyColor": "#ffffff"
              }
            }
          },
          {
            "elementId": "page1-section-accessory-background",
            "elementType": "heading",
            "level": 2,
            "boundingBox": {
              "x": 300,
              "y": 1860,
              "width": 800,
              "height": 30
            },
            "zIndex": 10,
            "content": {
              "text": "Set the background color of accessory widgets",
              "verbatimText": "Set the background color of accessory widgets",
              "style": {
                "fontFamily": "SF Pro Display",
                "fontSize": "24px",
                "fontWeight": "bold",
                "textColor": "#ffffff"
              }
            }
          },
          {
            "elementId": "page1-accessory-explanation",
            "elementType": "paragraph",
            "boundingBox": {
              "x": 300,
              "y": 1900,
              "width": 800,
              "height": 60
            },
            "zIndex": 10,
            "content": {
              "verbatimText": "Depending on your accessory widget or complication, you may need to set a consistent background for your accessory widget. Use AccessoryWidgetBackground to draw a consistent background for your widget, as shown in the following example. It creates a view that's similar to the circular Lock Screen widget that the Calendar app offers:",
              "text": "Depending on your accessory widget or complication, you may need to set a consistent background for your accessory widget. Use AccessoryWidgetBackground to draw a consistent background for your widget, as shown in the following example. It creates a view that's similar to the circular Lock Screen widget that the Calendar app offers:",
              "inlineCode": [
                {
                  "text": "AccessoryWidgetBackground",
                  "type": "struct",
                  "link": "https://developer.apple.com/documentation/widgetkit/accessorywidgetbackground",
                  "linkColor": "#2997ff"
                }
              ]
            }
          },
          {
            "elementId": "page1-code-example-2",
            "elementType": "code",
            "language": "Swift",
            "boundingBox": {
              "x": 300,
              "y": 1980,
              "width": 800,
              "height": 180
            },
            "zIndex": 10,
            "content": {
              "verbatimCode": "ZStack {\n    AccessoryWidgetBackground()\n    VStack {\n        Text(\"MON\")\n        Text(\"6\")\n            .font(.title)\n    }\n}",
              "codeLines": [
                {"lineNumber": 1, "code": "ZStack {"},
                {"lineNumber": 2, "code": "    AccessoryWidgetBackground()"},
                {"lineNumber": 3, "code": "    VStack {"},
                {"lineNumber": 4, "code": "        Text(\"MON\")"},
                {"lineNumber": 5, "code": "        Text(\"6\")"},
                {"lineNumber": 6, "code": "            .font(.title)"},
                {"lineNumber": 7, "code": "    }"},
                {"lineNumber": 8, "code": "}"}
              ],
              "syntaxHighlighting": {
                "types": {
                  "color": "#dabaff",
                  "tokens": ["ZStack", "AccessoryWidgetBackground", "VStack", "Text"]
                },
                "strings": {
                  "color": "#fc6a5d",
                  "tokens": ["\"MON\"", "\"6\""]
                },
                "properties": {
                  "color": "#41a1c0",
                  "tokens": ["font", "title"]
                },
                "punctuation": {
                  "color": "#ffffff",
                  "tokens": ["{", "}", "(", ")", "."]
                }
              },
              "style": {
                "backgroundColor": "#2c2c2e",
                "fontFamily": "SF Mono, Menlo, monospace",
                "fontSize": "14px",
                "padding": "16px",
                "borderRadius": "8px",
                "lineHeight": "1.5"
              }
            },
            "relationships": [
              {
                "relatedElementId": "page1-accessory-explanation",
                "relationshipType": "continues-from"
              }
            ]
          },
          {
            "elementId": "page1-section-see-also",
            "elementType": "heading",
            "level": 2,
            "boundingBox": {
              "x": 300,
              "y": 2180,
              "width": 800,
              "height": 30
            },
            "zIndex": 10,
            "content": {
              "text": "See Also",
              "verbatimText": "See Also",
              "style": {
                "fontFamily": "SF Pro Display",
                "fontSize": "24px",
                "fontWeight": "bold",
                "textColor": "#ffffff"
              }
            }
          },
          {
            "elementId": "page1-see-also-subsection",
            "elementType": "heading",
            "level": 3,
            "boundingBox": {
              "x": 300,
              "y": 2220,
              "width": 800,
              "height": 25
            },
            "zIndex": 10,
            "content": {
              "text": "Layout and presentation",
              "verbatimText": "Layout and presentation",
              "style": {
                "fontFamily": "SF Pro Display",
                "fontSize": "18px",
                "fontWeight": "semibold",
                "textColor": "#86868b"
              }
            }
          },
          {
            "elementId": "page1-related-articles",
            "elementType": "list",
            "listType": "linked-items",
            "boundingBox": {
              "x": 300,
              "y": 2260,
              "width": 800,
              "height": 400
            },
            "zIndex": 10,
            "content": {
              "items": [
                {
                  "icon": "document icon (doc.text)",
                  "title": "Supporting additional widget sizes",
                  "titleVerbatim": "Supporting additional widget sizes",
                  "description": "Offer widgets in additional contexts by adding support for various widget sizes.",
                  "descriptionVerbatim": "Offer widgets in additional contexts by adding support for various widget sizes.",
                  "type": "article",
                  "url": "https://developer.apple.com/documentation/widgetkit/supporting-additional-widget-sizes",
                  "titleColor": "#2997ff"
                },
                {
                  "icon": "document icon (doc.text)",
                  "title": "Optimizing your widget for accented rendering mode and Liquid Glass",
                  "titleVerbatim": "Optimizing your widget for accented rendering mode and Liquid Glass",
                  "description": "Make your widget feel at home on Apple platforms and Liquid Glass by using accented rendering mode.",
                  "descriptionVerbatim": "Make your widget feel at home on Apple platforms and Liquid Glass by using accented rendering mode.",
                  "type": "article",
                  "url": "https://developer.apple.com/documentation/widgetkit/optimizing-your-widget-for-accented-rendering-mode",
                  "titleColor": "#2997ff"
                },
                {
                  "icon": "document icon (doc.text)",
                  "title": "Adding StandBy and CarPlay support to your widget",
                  "titleVerbatim": "Adding StandBy and CarPlay support to your widget",
                  "description": "Ensure that your small system family widget works well in StandBy and CarPlay.",
                  "descriptionVerbatim": "Ensure that your small system family widget works well in StandBy and CarPlay.",
                  "type": "article",
                  "url": "https://developer.apple.com/documentation/widgetkit/adding-standby-and-carplay-support-to-your-widget",
                  "titleColor": "#2997ff"
                },
                {
                  "icon": "S (struct icon, purple/violet)",
                  "prefix": "struct",
                  "title": "WidgetRenderingMode",
                  "titleVerbatim": "struct WidgetRenderingMode",
                  "description": "Constants that indicate the rendering mode for a widget.",
                  "descriptionVerbatim": "Constants that indicate the rendering mode for a widget.",
                  "type": "api-reference",
                  "url": "https://developer.apple.com/documentation/widgetkit/widgetrenderingmode",
                  "titleColor": "#2997ff",
                  "titleFontFamily": "monospace"
                },
                {
                  "icon": "S (struct icon, purple/violet)",
                  "prefix": "struct",
                  "title": "WidgetAccentedRenderingMode",
                  "titleVerbatim": "struct WidgetAccentedRenderingMode",
                  "description": "Constants that indicate the rendering mode for an Image in when displayed in a widget in accented mode.",
                  "descriptionVerbatim": "Constants that indicate the rendering mode for an Image in when displayed in a widget in accented mode.",
                  "type": "api-reference",
                  "url": "https://developer.apple.com/documentation/widgetkit/widgetaccentedrenderingmode",
                  "titleColor": "#2997ff",
                  "titleFontFamily": "monospace"
                },
                {
                  "icon": "S (struct icon, purple/violet)",
                  "prefix": "struct",
                  "title": "AccessoryWidgetBackground",
                  "titleVerbatim": "struct AccessoryWidgetBackground",
                  "description": "An adaptive background view that provides a standard appearance based on the the widget's environment.",
                  "descriptionVerbatim": "An adaptive background view that provides a standard appearance based on the the widget's environment.",
                  "type": "api-reference",
                  "url": "https://developer.apple.com/documentation/widgetkit/accessorywidgetbackground",
                  "titleColor": "#2997ff",
                  "titleFontFamily": "monospace"
                },
                {
                  "icon": "S (struct icon, purple/violet)",
                  "prefix": "struct",
                  "title": "WidgetLocation",
                  "titleVerbatim": "struct WidgetLocation",
                  "description": "Values that indicate different widget locations.",
                  "descriptionVerbatim": "Values that indicate different widget locations.",
                  "type": "api-reference",
                  "url": "https://developer.apple.com/documentation/widgetkit/widgetlocation",
                  "titleColor": "#2997ff",
                  "titleFontFamily": "monospace"
                }
              ]
            }
          },
          {
            "elementId": "page1-sidebar-right",
            "elementType": "navigation",
            "boundingBox": {
              "x": 1140,
              "y": 80,
              "width": 280,
              "height": 400
            },
            "zIndex": 10,
            "content": {
              "type": "on-this-page",
              "sections": [
                {
                  "title": "Platforms",
                  "items": ["iOS", "iPadOS", "macOS", "tvOS", "visionOS", "watchOS"]
                },
                {
                  "title": "Tools",
                  "items": ["Swift", "SwiftUI", "Swift Playground", "TestFlight", "Xcode", "Xcode Cloud", "SF Symbols"]
                }
              ]
            }
          },
          {
            "elementId": "page1-language-selector",
            "elementType": "dropdown",
            "boundingBox": {
              "x": 1100,
              "y": 60,
              "width": 150,
              "height": 30
            },
            "zIndex": 100,
            "content": {
              "type": "dropdown",
              "label": "Language:",
              "selectedValue": "Swift",
              "color": "#2997ff"
            }
          },
          {
            "elementId": "page1-footer",
            "elementType": "footer",
            "boundingBox": {
              "x": 0,
              "y": 2800,
              "width": 1440,
              "height": 400
            },
            "zIndex": 10,
            "content": {
              "columns": [
                {
                  "title": "Platforms",
                  "items": ["iOS", "iPadOS", "macOS", "tvOS", "visionOS", "watchOS"]
                },
                {
                  "title": "Tools",
                  "items": ["Swift", "SwiftUI", "Swift Playground", "TestFlight", "Xcode", "Xcode Cloud", "SF Symbols"]
                },
                {
                  "title": "Topics & Technologies",
                  "items": ["Accessibility", "Accessories", "App Extension", "App Store", "Audio & Video", "Augmented Reality", "Design", "Distribution", "Education", "Fonts", "Games", "Health & Fitness", "In-App Purchase", "Localization", "Maps & Location", "Machine Learning & AI", "Open Source", "Security", "Safari & Web"]
                },
                {
                  "title": "Resources",
                  "items": ["Documentation", "Tutorials", "Downloads", "Forums", "Videos"]
                },
                {
                  "title": "Support",
                  "items": ["Support Articles", "Contact Us", "Bug Reporting", "System Status"]
                },
                {
                  "title": "Account",
                  "items": ["Apple Developer", "App Store Connect", "Certificates, IDs, & Profiles", "Feedback Assistant"]
                },
                {
                  "title": "Programs",
                  "items": ["Apple Developer Program", "Apple Developer Enterprise Program", "App Store Small Business Program", "MFi Program", "News Partner Program", "Video Partner Program", "Security Bounty Program", "Security Research Device Program"]
                },
                {
                  "title": "Events",
                  "items": ["Meet with Apple", "Apple Developer Centers", "App Store Awards", "Apple Design Awards", "Apple Developer Academies", "WWDC"]
                }
              ],
              "feedbackText": "To submit feedback on documentation, visit Feedback Assistant.",
              "feedbackLink": "https://feedbackassistant.apple.com/",
              "copyright": "Copyright Â© 2025 Apple Inc. All rights reserved.",
              "legalLinks": [
                {"text": "Terms of Use", "url": "https://www.apple.com/legal/internet-services/terms/site.html"},
                {"text": "Privacy Policy", "url": "https://www.apple.com/privacy/privacy-policy/"},
                {"text": "Agreements and Guidelines", "url": "https://developer.apple.com/support/terms/"}
              ],
              "themeToggle": {
                "options": ["Light", "Dark", "Auto"],
                "currentSelection": "Dark",
                "icons": {
                  "light": "sun.max.fill",
                  "dark": "moon.fill",
                  "auto": "circle.lefthalf.filled"
                }
              }
            }
          }
        ],
        "readingOrder": [
          "page1-header-navigation",
          "page1-sidebar-left",
          "page1-breadcrumb",
          "page1-article-type-badge",
          "page1-main-title",
          "page1-subtitle",
          "page1-section-overview",
          "page1-overview-intro",
          "page1-context-list",
          "page1-marking-instruction",
          "page1-important-callout-1",
          "page1-steps-intro",
          "page1-steps-list",
          "page1-sample-code-intro",
          "page1-code-example-1",
          "page1-marking-explanation",
          "page1-apple-watch-note",
          "page1-environment-variable",
          "page1-section-opt-out",
          "page1-opt-out-explanation",
          "page1-important-callout-2",
          "page1-section-accessory-background",
          "page1-accessory-explanation",
          "page1-code-example-2",
          "page1-section-see-also",
          "page1-see-also-subsection",
          "page1-related-articles",
          "page1-sidebar-right",
          "page1-language-selector",
          "page1-footer"
        ],
        "pageSummary": "This page provides comprehensive Apple Developer documentation on configuring widget backgrounds in WidgetKit. It covers: (1) Overview of how widgets appear differently in vibrant appearance and StandBy modes, (2) Step-by-step instructions for marking backgrounds as removable using containerBackground(_:for:) modifier, (3) Code example from Emoji Rangers sample project demonstrating implementation, (4) How to opt out of background removal using containerBackgroundRemovable(_:) for content-critical widgets like photos/maps, (5) Setting consistent backgrounds for accessory widgets using AccessoryWidgetBackground, and (6) Links to related documentation including widget sizes, rendering modes, and StandBy/CarPlay support."
      }
    ],
    "crossPageElements": {
      "tableOfContents": {
        "present": false,
        "entries": []
      },
      "runningHeaders": {
        "left": " Developer",
        "right": "Language: Swift dropdown"
      },
      "runningFooters": "Apple legal, resources, and feedback links",
      "pageNumbers": {
        "present": false,
        "format": null
      }
    },
    "semanticStructure": {
      "sections": [
        {
          "sectionId": "overview",
          "title": "Overview",
          "startPage": 1,
          "endPage": 1,
          "subsections": [],
          "summary": "Introduces widget background context-sensitivity, explains vibrant appearance and StandBy background removal behaviors, provides two-step instructions for marking backgrounds as removable, and includes code example from Emoji Rangers sample project."
        },
        {
          "sectionId": "opt-out",
          "title": "Explicitly opt out of background removal",
          "startPage": 1,
          "endPage": 1,
          "subsections": [],
          "summary": "Explains when to prevent background removal (for content-critical widgets like photos/maps), how to use containerBackgroundRemovable(_:) modifier, and warns that opting out excludes widgets from iPad Lock Screen and StandBy contexts."
        },
        {
          "sectionId": "accessory-background",
          "title": "Set the background color of accessory widgets",
          "startPage": 1,
          "endPage": 1,
          "subsections": [],
          "summary": "Describes AccessoryWidgetBackground for consistent backgrounds on accessory widgets and complications, with code example similar to Calendar app's circular Lock Screen widget."
        },
        {
          "sectionId": "see-also",
          "title": "See Also",
          "startPage": 1,
          "endPage": 1,
          "subsections": [
            {
              "sectionId": "layout-presentation",
              "title": "Layout and presentation",
              "summary": "Related articles (widget sizes, accented rendering, StandBy/CarPlay) and API references (WidgetRenderingMode, WidgetAccentedRenderingMode, AccessoryWidgetBackground, WidgetLocation)."
            }
          ],
          "summary": "Links to related WidgetKit documentation for widget sizing, rendering modes, StandBy/CarPlay support, and relevant struct definitions."
        }
      ],
      "documentFlow": "The document follows a structured tutorial pattern: Overview introduces the problem and provides solutions with code, followed by an edge case section for opting out of the default behavior, then a specialized section for accessory widgets, and concludes with comprehensive related resources. The progression moves from general concepts to specific implementations to advanced use cases."
    },
    "extractedKnowledge": {
      "keyTerms": [
        {
          "term": "containerBackground(_:for:)",
          "definition": "A SwiftUI view modifier that defines the background appearance of a widget and signals to WidgetKit that the background can be removed in contexts like vibrant appearance and StandBy.",
          "occurrences": 3
        },
        {
          "term": "vibrant appearance",
          "definition": "A widget rendering context where the system removes the background of a widget or renders it with semi-translucent appearance.",
          "occurrences": 1
        },
        {
          "term": "StandBy",
          "definition": "An iPhone feature/mode where the system removes widget backgrounds entirely for a cleaner display.",
          "occurrences": 4
        },
        {
          "term": "containerBackgroundRemovable(_:)",
          "definition": "A WidgetConfiguration modifier that when set to false prevents WidgetKit from removing a widget's background, useful for widgets where the background IS the content.",
          "occurrences": 1
        },
        {
          "term": "AccessoryWidgetBackground",
          "definition": "A SwiftUI view that provides an adaptive background for accessory widgets, creating a standard appearance based on the widget's environment.",
          "occurrences": 4
        },
        {
          "term": "showsWidgetContainerBackground",
          "definition": "An environment variable that allows runtime detection of whether a widget is being displayed with or without its background.",
          "occurrences": 1
        },
        {
          "term": "Smart Stack",
          "definition": "A widget stack feature on Apple Watch where rectangular widgets use a default dark material background.",
          "occurrences": 2
        },
        {
          "term": "widgetAccentable()",
          "definition": "A modifier that marks content to respond to accent/tint color in widget rendering modes.",
          "occurrences": 1
        },
        {
          "term": "WidgetRenderingMode",
          "definition": "A struct containing constants that indicate the rendering mode for a widget.",
          "occurrences": 2
        },
        {
          "term": "WidgetAccentedRenderingMode",
          "definition": "A struct containing constants that indicate the rendering mode for an Image when displayed in a widget in accented mode.",
          "occurrences": 2
        },
        {
          "term": "WidgetLocation",
          "definition": "A struct containing values that indicate different widget locations.",
          "occurrences": 2
        },
        {
          "term": "Liquid Glass",
          "definition": "Apple's design language referenced in context of accented rendering mode optimization.",
          "occurrences": 1
        },
        {
          "term": "accessoryRectangular",
          "definition": "A widget family for rectangular accessory widgets that can appear on Lock Screen, as watch complications, or in Smart Stack.",
          "occurrences": 1
        }
      ],
      "keyFindings": [
        "All widgets should mark their background views as removable to ensure correct appearance across different contexts (vibrant appearance, StandBy, Lock Screen).",
        "Xcode displays a warning message overlay during development if a widget doesn't properly support removable background views.",
        "Two steps are required: (1) Add containerBackground(_:for:) modifier, (2) Move background code inside the modifier's closure with 'widget' parameter.",
        "The same widget code can render with full-color background in Smart Stack on Apple Watch but without background as a watch complication or on Lock Screen.",
        "On Apple Watch, rectangular widgets in Smart Stack use a default dark material background.",
        "Adding a container background makes widgets more recognizable and visually tied to the app.",
        "The showsWidgetContainerBackground environment variable allows runtime detection of background visibility state.",
        "Widgets displaying full-bleed content like photos or maps should opt out using containerBackgroundRemovable(false).",
        "Marking a background as nonremovable excludes the widget from contexts that require removable backgrounds (iPad Lock Screen, StandBy).",
        "AccessoryWidgetBackground provides a standardized adaptive background for accessory widgets and complications."
      ],
      "technicalSpecifications": {
        "supportedPlatforms": ["iOS", "iPadOS", "macOS", "tvOS", "visionOS", "watchOS"],
        "framework": "WidgetKit",
        "language": "Swift",
        "uiFramework": "SwiftUI",
        "requiredModifiers": [
          {
            "name": "containerBackground(_:for:)",
            "purpose": "Define removable background",
            "parameter": ".widget",
            "documentation": "https://developer.apple.com/documentation/swiftui/view/containerbackground(_:for:)"
          },
          {
            "name": "containerBackgroundRemovable(_:)",
            "purpose": "Opt out of background removal",
            "parameter": "false",
            "documentation": "https://developer.apple.com/documentation/widgetkit/widgetconfiguration/containerbackgroundremovable(_:)"
          }
        ],
        "environmentVariables": [
          {
            "name": "showsWidgetContainerBackground",
            "type": "Bool",
            "purpose": "Detect background visibility at runtime",
            "documentation": "https://developer.apple.com/documentation/swiftui/environmentvalues/showswidgetcontainerbackground"
          }
        ],
        "relatedAPIs": [
          {
            "name": "WidgetRenderingMode",
            "type": "struct",
            "description": "Constants that indicate the rendering mode for a widget."
          },
          {
            "name": "WidgetAccentedRenderingMode",
            "type": "struct",
            "description": "Constants that indicate the rendering mode for an Image in accented mode."
          },
          {
            "name": "AccessoryWidgetBackground",
            "type": "struct",
            "description": "An adaptive background view that provides a standard appearance."
          },
          {
            "name": "WidgetLocation",
            "type": "struct",
            "description": "Values that indicate different widget locations."
          }
        ],
        "sampleProject": {
          "name": "Emoji Rangers: Supporting Live Activities, interactivity, and animations",
          "url": "https://developer.apple.com/documentation/widgetkit/emoji-rangers-supporting-live-activities-interactivity-and-animations"
        }
      },
      "designDecisions": [
        {
          "decision": "Background removal is the default behavior in certain contexts",
          "rationale": "Widgets need to adapt to various display contexts (vibrant, StandBy) where backgrounds would interfere with the system's design language."
        },
        {
          "decision": "Explicit opt-out mechanism provided via containerBackgroundRemovable",
          "rationale": "Some widgets (photos, maps) have backgrounds that ARE the content, so removal would break functionality."
        },
        {
          "decision": "Warning overlay shown during Xcode development",
          "rationale": "Ensures developers are aware of the requirement and fix issues before shipping to users."
        },
        {
          "decision": "Accessory widgets use separate AccessoryWidgetBackground handling",
          "rationale": "Accessory widgets and complications need consistent backgrounds that adapt automatically to their environment."
        },
        {
          "decision": "Nonremovable backgrounds exclude widgets from certain contexts",
          "rationale": "iPad Lock Screen and StandBy require removable backgrounds by design, so opting out means the widget won't appear in these contexts."
        }
      ]
    },
    "codeExamples": [
      {
        "exampleId": "code-example-1",
        "title": "Widget with removable container background",
        "description": "Demonstrates how to implement a rectangular accessory widget with a properly marked removable background using containerBackground(for: .widget) modifier.",
        "sourceProject": "Emoji Rangers: Supporting Live Activities, interactivity, and animations",
        "sourceProjectUrl": "https://developer.apple.com/documentation/widgetkit/emoji-rangers-supporting-live-activities-interactivity-and-animations",
        "language": "Swift",
        "fullCode": "var body: some View {\n    switch family {\n    // Logic for additional widget sizes.\n    case .accessoryRectangular:\n        HStack(alignment: .center, spacing: 0) {\n            VStack(alignment: .leading) {\n                Text(entry.hero.name)\n                    .font(.headline)\n                    .widgetAccentable()\n                Text(\"Level \\(entry.hero.level)\")\n                Text(entry.hero.fullHealthDate, style: .timer)\n            }.frame(maxWidth: .infinity, alignment: .leading)\n            Avatar(hero: entry.hero, includeBackground: false)\n        }\n        .containerBackground(for: .widget) {\n            Color.gameBackground\n        }\n    // Logic for additional widget sizes.\n    }\n}",
        "keyElements": [
          {
            "element": "switch family",
            "purpose": "Switch on widget family to handle different widget sizes"
          },
          {
            "element": ".accessoryRectangular",
            "purpose": "Widget family case for rectangular accessory widgets"
          },
          {
            "element": "HStack(alignment: .center, spacing: 0)",
            "purpose": "Horizontal layout container for widget content"
          },
          {
            "element": "VStack(alignment: .leading)",
            "purpose": "Vertical stack for text content aligned to leading edge"
          },
          {
            "element": "Text(entry.hero.name)",
            "purpose": "Display hero name from widget entry"
          },
          {
            "element": ".font(.headline)",
            "purpose": "Apply headline font style to hero name"
          },
          {
            "element": ".widgetAccentable()",
            "purpose": "Makes text respond to accented rendering mode"
          },
          {
            "element": "Text(\"Level \\(entry.hero.level)\")",
            "purpose": "Display hero level with string interpolation"
          },
          {
            "element": "Text(entry.hero.fullHealthDate, style: .timer)",
            "purpose": "Display countdown timer to full health"
          },
          {
            "element": ".frame(maxWidth: .infinity, alignment: .leading)",
            "purpose": "Expand VStack to fill available width"
          },
          {
            "element": "Avatar(hero: entry.hero, includeBackground: false)",
            "purpose": "Display hero avatar without its own background"
          },
          {
            "element": ".containerBackground(for: .widget) { Color.gameBackground }",
            "purpose": "Define removable background color for the widget - THE KEY MODIFIER"
          }
        ]
      },
      {
        "exampleId": "code-example-2",
        "title": "Accessory widget with consistent background",
        "description": "Shows how to create a circular accessory widget similar to the Calendar app's Lock Screen widget using AccessoryWidgetBackground.",
        "language": "Swift",
        "fullCode": "ZStack {\n    AccessoryWidgetBackground()\n    VStack {\n        Text(\"MON\")\n        Text(\"6\")\n            .font(.title)\n    }\n}",
        "keyElements": [
          {
            "element": "ZStack",
            "purpose": "Layer background behind content using z-axis stacking"
          },
          {
            "element": "AccessoryWidgetBackground()",
            "purpose": "Provides adaptive standard background for accessory widgets that adjusts to environment"
          },
          {
            "element": "VStack",
            "purpose": "Vertical stack for calendar display content"
          },
          {
            "element": "Text(\"MON\")",
            "purpose": "Display day abbreviation (Monday)"
          },
          {
            "element": "Text(\"6\")",
            "purpose": "Display date number"
          },
          {
            "element": ".font(.title)",
            "purpose": "Apply larger title font for visual hierarchy on the date number"
          }
        ],
        "visualReference": "Similar to the circular Lock Screen widget that the Calendar app offers"
      }
    ],
    "allLinks": {
      "internalDocumentationLinks": [
        {
          "text": "vibrant appearance",
          "url": "https://developer.apple.com/documentation/widgetkit/vibrant-appearance",
          "context": "Link in overview explaining background removal context"
        },
        {
          "text": "containerBackground(_:for:)",
          "url": "https://developer.apple.com/documentation/swiftui/view/containerbackground(_:for:)",
          "context": "Link to SwiftUI modifier documentation"
        },
        {
          "text": "Emoji Rangers: Supporting Live Activities, interactivity, and animations",
          "url": "https://developer.apple.com/documentation/widgetkit/emoji-rangers-supporting-live-activities-interactivity-and-animations",
          "context": "Link to sample code project"
        },
        {
          "text": "showsWidgetContainerBackground",
          "url": "https://developer.apple.com/documentation/swiftui/environmentvalues/showswidgetcontainerbackground",
          "context": "Link to environment variable documentation"
        },
        {
          "text": "containerBackgroundRemovable(_:)",
          "url": "https://developer.apple.com/documentation/widgetkit/widgetconfiguration/containerbackgroundremovable(_:)",
          "context": "Link to opt-out modifier documentation"
        },
        {
          "text": "AccessoryWidgetBackground",
          "url": "https://developer.apple.com/documentation/widgetkit/accessorywidgetbackground",
          "context": "Link to accessory widget background struct documentation"
        },
        {
          "text": "Supporting additional widget sizes",
          "url": "https://developer.apple.com/documentation/widgetkit/supporting-additional-widget-sizes",
          "context": "See Also related article"
        },
        {
          "text": "Optimizing your widget for accented rendering mode and Liquid Glass",
          "url": "https://developer.apple.com/documentation/widgetkit/optimizing-your-widget-for-accented-rendering-mode",
          "context": "See Also related article"
        },
        {
          "text": "Adding StandBy and CarPlay support to your widget",
          "url": "https://developer.apple.com/documentation/widgetkit/adding-standby-and-carplay-support-to-your-widget",
          "context": "See Also related article"
        },
        {
          "text": "struct WidgetRenderingMode",
          "url": "https://developer.apple.com/documentation/widgetkit/widgetrenderingmode",
          "context": "See Also API reference"
        },
        {
          "text": "struct WidgetAccentedRenderingMode",
          "url": "https://developer.apple.com/documentation/widgetkit/widgetaccentedrenderingmode",
          "context": "See Also API reference"
        },
        {
          "text": "struct WidgetLocation",
          "url": "https://developer.apple.com/documentation/widgetkit/widgetlocation",
          "context": "See Also API reference"
        }
      ],
      "sidebarNavigationLinks": [
        {
          "text": "Displaying the right widget back...",
          "fullText": "Displaying the right widget background",
          "section": "WidgetKit",
          "selected": true
        },
        {
          "text": "Optimizing your widget for accent...",
          "fullText": "Optimizing your widget for accented rendering mode and Liquid Glass",
          "section": "WidgetKit"
        },
        {
          "text": "Adding StandBy and CarPlay supp...",
          "fullText": "Adding StandBy and CarPlay support to your widget",
          "section": "WidgetKit"
        },
        {
          "text": "WidgetRenderingMode",
          "section": "WidgetKit",
          "type": "struct"
        },
        {
          "text": "WidgetAccentedRenderingMode",
          "section": "WidgetKit",
          "type": "struct"
        },
        {
          "text": "AccessoryWidgetBackground",
          "section": "WidgetKit",
          "type": "struct"
        },
        {
          "text": "WidgetLocation",
          "section": "WidgetKit",
          "type": "struct"
        },
        {
          "text": "Keeping a widget up to date",
          "section": "Timeline updates"
        },
        {
          "text": "TimelineProvider",
          "section": "Timeline updates",
          "type": "protocol"
        },
        {
          "text": "AppIntentTimelineProvider",
          "section": "Timeline updates",
          "type": "protocol"
        },
        {
          "text": "IntentTimelineProvider",
          "section": "Timeline updates",
          "type": "protocol"
        },
        {
          "text": "TimelineProviderContext",
          "section": "Timeline updates",
          "type": "struct"
        },
        {
          "text": "TimelineEntry",
          "section": "Timeline updates",
          "type": "protocol"
        },
        {
          "text": "Timeline",
          "section": "Timeline updates",
          "type": "struct"
        },
        {
          "text": "WidgetCenter",
          "section": "Timeline updates",
          "type": "class"
        },
        {
          "text": "Updating widgets with WidgetKit p...",
          "fullText": "Updating widgets with WidgetKit push notifications",
          "section": "Push notification updates"
        }
      ]
    },
    "visualDescription": {
      "overallAppearance": "Dark theme Apple Developer documentation page with predominantly dark gray background (#1c1c1e) and white text. The page uses a three-column layout typical of Apple's documentation websites.",
      "colorPalette": {
        "primary": "#1c1c1e",
        "secondary": "#2c2c2e",
        "tertiary": "#3a3a3c",
        "text": "#ffffff",
        "textSecondary": "#86868b",
        "accent": "#2997ff",
        "warning": "#ffcc00",
        "codeKeywords": "#ff7ab2",
        "codeTypes": "#dabaff",
        "codeProperties": "#41a1c0",
        "codeStrings": "#fc6a5d",
        "codeComments": "#7f8c8d"
      },
      "headerBar": {
        "backgroundColor": "#000000",
        "height": "approximately 56px",
        "elements": [
          {
            "type": "logo",
            "content": " Developer (Apple symbol followed by 'Developer' text)",
            "position": "left",
            "color": "#ffffff"
          },
          {
            "type": "navigation",
            "items": ["News", "Discover", "Design", "Develop", "Distribute", "Support", "Account"],
            "position": "center-right",
            "color": "#86868b",
            "hoverColor": "#ffffff"
          },
          {
            "type": "searchIcon",
            "icon": "magnifying glass",
            "position": "far right",
            "color": "#86868b"
          }
        ]
      },
      "leftSidebar": {
        "backgroundColor": "#2c2c2e",
        "width": "approximately 280px",
        "borderRight": "1px solid #3a3a3c",
        "typography": {
          "title": {
            "text": "Documentation",
            "icon": "document.text.fill",
            "color": "#ffffff",
            "fontSize": "16px"
          },
          "sectionHeaders": {
            "color": "#86868b",
            "fontSize": "12px",
            "textTransform": "none"
          },
          "linkItems": {
            "color": "#ffffff",
            "fontSize": "14px"
          },
          "selectedItem": {
            "backgroundColor": "#0a84ff",
            "color": "#ffffff",
            "borderRadius": "6px"
          }
        },
        "icons": {
          "documentIcon": "small document symbol (doc.text)",
          "structIcon": "S in purple/violet rounded square",
          "protocolIcon": "Pr in teal rounded square",
          "classIcon": "C in yellow/gold rounded square"
        }
      },
      "mainContent": {
        "backgroundColor": "#1c1c1e",
        "maxWidth": "approximately 800px",
        "padding": "32px",
        "typography": {
          "h1": {
            "fontSize": "36px",
            "fontWeight": "bold",
            "color": "#ffffff",
            "marginBottom": "8px",
            "fontFamily": "SF Pro Display"
          },
          "h2": {
            "fontSize": "24px",
            "fontWeight": "bold",
            "color": "#ffffff",
            "marginTop": "32px",
            "marginBottom": "16px",
            "fontFamily": "SF Pro Display"
          },
          "h3": {
            "fontSize": "18px",
            "fontWeight": "semibold",
            "color": "#86868b",
            "fontFamily": "SF Pro Display"
          },
          "body": {
            "fontSize": "16px",
            "lineHeight": "1.6",
            "color": "#ffffff",
            "fontFamily": "SF Pro Text"
          },
          "subtitle": {
            "fontSize": "18px",
            "color": "#86868b",
            "fontFamily": "SF Pro Text"
          },
          "links": {
            "color": "#2997ff",
            "textDecoration": "none"
          },
          "inlineCode": {
            "fontFamily": "SF Mono, Menlo, monospace",
            "backgroundColor": "transparent",
            "color": "#2997ff"
          }
        },
        "codeBlocks": {
          "backgroundColor": "#2c2c2e",
          "borderRadius": "8px",
          "padding": "16px",
          "fontFamily": "SF Mono, Menlo, monospace",
          "fontSize": "14px",
          "lineHeight": "1.5"
        },
        "callouts": {
          "important": {
            "backgroundColor": "#3a3a3c",
            "borderLeft": "4px solid #ffcc00",
            "padding": "16px",
            "borderRadius": "0 8px 8px 0",
            "titleColor": "#ffcc00",
            "titleFontWeight": "semibold"
          }
        }
      },
      "rightSidebar": {
        "width": "approximately 280px",
        "content": "Platforms and Tools metadata for the article"
      },
      "footer": {
        "backgroundColor": "#000000",
        "padding": "48px 32px",
        "columnLayout": "8 columns",
        "typography": {
          "columnHeaders": {
            "color": "#86868b",
            "fontSize": "12px",
            "textTransform": "none",
            "fontWeight": "semibold"
          },
          "links": {
            "color": "#86868b",
            "fontSize": "12px"
          }
        },
        "bottomBar": {
          "copyright": "Copyright Â© 2025 Apple Inc. All rights reserved.",
          "legalLinks": ["Terms of Use", "Privacy Policy", "Agreements and Guidelines"],
          "themeSelector": {
            "options": ["Light", "Dark", "Auto"],
            "icons": "sun/moon/half-circle symbols",
            "currentSelection": "Dark"
          }
        }
      }
    }
  }
}
